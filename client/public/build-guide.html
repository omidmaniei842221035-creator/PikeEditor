<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>راهنمای ساخت نسخه Desktop</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Tahoma, Arial, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 20px;
            line-height: 1.8;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2c3e50;
            border-bottom: 4px solid #3498db;
            padding-bottom: 15px;
            margin-bottom: 25px;
            font-size: 32px;
        }
        h2 {
            color: #e74c3c;
            background: #fee;
            padding: 15px;
            border-radius: 8px;
            margin: 30px 0 20px 0;
        }
        h3 {
            color: #27ae60;
            margin: 25px 0 15px 0;
            padding-right: 15px;
            border-right: 5px solid #27ae60;
            font-size: 20px;
        }
        h4 {
            color: #2980b9;
            margin: 20px 0 10px 0;
        }
        .why-box {
            background: #fff3cd;
            border: 3px solid #ffc107;
            padding: 25px;
            border-radius: 10px;
            margin: 25px 0;
        }
        .why-box h2 {
            color: #856404;
            background: transparent;
            padding: 0;
            margin-bottom: 15px;
        }
        .step-box {
            background: #f8f9fa;
            border-right: 5px solid #3498db;
            padding: 20px;
            margin: 15px 0;
            border-radius: 5px;
        }
        .prereq {
            background: #d4edda;
            border: 2px solid #28a745;
            padding: 20px;
            margin: 15px 0;
            border-radius: 8px;
        }
        code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 4px 10px;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }
        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        .download-btn {
            display: inline-block;
            background: #3498db;
            color: white;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: bold;
            font-size: 18px;
        }
        .download-btn:hover {
            background: #2980b9;
        }
        .warning {
            background: #f8d7da;
            border: 2px solid #f5c6cb;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            color: #721c24;
        }
        .success {
            background: #d4edda;
            border: 2px solid #c3e6cb;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            color: #155724;
        }
        ul, ol {
            margin-right: 30px;
            margin-top: 10px;
        }
        li {
            margin: 8px 0;
        }
        .number-badge {
            display: inline-block;
            background: #3498db;
            color: white;
            width: 30px;
            height: 30px;
            text-align: center;
            line-height: 30px;
            border-radius: 50%;
            margin-left: 10px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🔨 راهنمای کامل ساخت نسخه Desktop</h1>
        <p style="color: #7f8c8d; font-size: 16px; margin-bottom: 20px;">سامانه مانیتورینگ POS - نسخه قابل نصب و آفلاین</p>

        <div class="why-box">
            <h2>⚠️ چرا باید خودتان Build کنید؟</h2>
            <p style="color: #856404; font-size: 16px;">
                به دلیل محدودیت‌های فنی (کتابخانه‌های native مثل better-sqlite3)، <strong>نمی‌توان روی Linux برای Windows build کرد</strong>.
            </p>
            <p style="color: #856404; margin-top: 10px;">
                📌 این یک محدودیت واقعی است - شما باید روی کامپیوتر Windows خودتان build کنید تا فایل نهایی کار کند.
            </p>
        </div>

        <h2>📋 مرحله 1: نصب پیش‌نیازها (یکبار)</h2>

        <div class="prereq">
            <h3><span class="number-badge">1</span>نصب Node.js</h3>
            <ol>
                <li>به <a href="https://nodejs.org/" target="_blank" style="color: #3498db;">nodejs.org</a> بروید</li>
                <li>نسخه <strong>LTS (18 یا بالاتر)</strong> را دانلود کنید</li>
                <li>نصب کنید (Next > Next > Install)</li>
                <li>تست کنید در Command Prompt:</li>
            </ol>
            <div class="code-block">node --version<br>npm --version</div>
        </div>

        <div class="prereq">
            <h3><span class="number-badge">2</span>نصب Python</h3>
            <ol>
                <li>به <a href="https://www.python.org/downloads/" target="_blank" style="color: #3498db;">python.org</a> بروید</li>
                <li>Python 3.8+ دانلود کنید</li>
                <li>در نصب، حتماً <strong>"Add Python to PATH"</strong> را فعال کنید</li>
            </ol>
        </div>

        <div class="prereq">
            <h3><span class="number-badge">3</span>نصب Build Tools</h3>
            <p>Command Prompt را <strong>به عنوان Administrator</strong> باز کنید:</p>
            <div class="code-block">npm install --global windows-build-tools</div>
            <div class="warning">
                ⏱️ این فرآیند چند دقیقه طول می‌کشد. صبر کنید تا کامل شود.
            </div>
        </div>

        <h2>📥 مرحله 2: دانلود پروژه</h2>

        <div class="step-box">
            <h4>روش 1: دانلود ZIP از Replit</h4>
            <ol>
                <li>در صفحه Replit، روی منوی <strong>⋮ (3 نقطه)</strong> کلیک کنید</li>
                <li><strong>"Download as ZIP"</strong> را انتخاب کنید</li>
                <li>فایل را Extract کنید (مثلاً در <code>C:\POS-System</code>)</li>
            </ol>
        </div>

        <h2>🔧 مرحله 3: Build کردن</h2>

        <div class="step-box">
            <p>Command Prompt را در پوشه پروژه باز کنید و <strong>به ترتیب</strong> اجرا کنید:</p>
            
            <h4>گام 1: نصب کتابخانه‌ها</h4>
            <div class="code-block">npm install</div>
            <p style="margin-top: 10px;">اگر خطا گرفتید:</p>
            <div class="code-block">npm install --force</div>

            <h4 style="margin-top: 20px;">گام 2: Build کردن</h4>
            <div class="code-block">npm run build</div>

            <h4 style="margin-top: 20px;">گام 3: تست</h4>
            <div class="code-block">node dist\index.js</div>
            <p style="margin-top: 10px;">مرورگر را باز کنید: <code>http://localhost:5000</code></p>
            
            <div class="success">
                ✅ اگر کار کرد، عالی! به مرحله بعد بروید.
            </div>
        </div>

        <h2>📦 مرحله 4: ساخت پکیج نهایی</h2>

        <div class="step-box">
            <h4>گام 1: ایجاد پوشه</h4>
            <div class="code-block">
mkdir POS-Desktop<br>
xcopy dist POS-Desktop\dist /E /I<br>
xcopy package.json POS-Desktop\
            </div>

            <h4 style="margin-top: 20px;">گام 2: فایل Start</h4>
            <p>یک فایل <code>Start-POS.bat</code> در <code>POS-Desktop</code> بسازید با این محتوا:</p>
            <div class="code-block">
@echo off<br>
echo 🚀 Starting POS System...<br>
node dist\index.js<br>
pause
            </div>

            <h4 style="margin-top: 20px;">گام 3: آماده برای استفاده</h4>
            <p>حالا پوشه <code>POS-Desktop</code> را:</p>
            <ul>
                <li>ZIP کنید</li>
                <li>یا روی فلش کپی کنید</li>
                <li>یا به اشتراک بگذارید</li>
            </ul>
        </div>

        <h2>🚀 استفاده</h2>

        <div class="success">
            <p><strong>روی هر کامپیوتر Windows که Node.js دارد:</strong></p>
            <ol>
                <li>پوشه <code>POS-Desktop</code> را کپی کنید</li>
                <li><code>Start-POS.bat</code> را اجرا کنید</li>
                <li>مرورگر: <code>http://localhost:5000</code></li>
            </ol>
        </div>

        <h2>🐛 حل مشکلات</h2>

        <div class="warning">
            <h4>npm install خطا می‌دهد:</h4>
            <div class="code-block">
npm cache clean --force<br>
npm install --force
            </div>
        </div>

        <div class="warning">
            <h4>Port 5000 اشغال است:</h4>
            <div class="code-block">
set PORT=8080<br>
node dist\index.js
            </div>
        </div>

        <h2>📄 دانلود راهنمای کامل (فایل متنی)</h2>
        <p>برای داشتن راهنما در کنار خودتان:</p>
        <a href="/BUILD-ON-WINDOWS.md" class="download-btn" download>
            📥 دانلود راهنمای کامل (MD)
        </a>

        <div style="text-align: center; margin-top: 40px; padding: 20px; background: #f8f9fa; border-radius: 10px;">
            <p style="color: #7f8c8d; font-size: 16px;">موفق باشید! 🎉</p>
            <p style="color: #7f8c8d; margin-top: 10px;">اگر مشکلی پیش آمد، دستورالعمل‌ها را دقیقاً دنبال کنید.</p>
        </div>
    </div>
</body>
</html>
